extends base.pug

block content
    if isFind
        if isFailed
            div.row
                div.col.s12.l12.m12
                    div.card.red.darken-1
                        div.card-content.white-text
                            span.card-title Не удалось сохранить изменения
                            p По каким-то причинам изменений не удалось сохранить
        if isUpdate
            div.row
                div.col.s12.l12.m12
                    div.card.green.darken-1
                        div.card-content.white-text
                            span.card-title Изменения успешно сохранены
                            p Поздравляем! Все изменения успешно сохранены!
        form(method="POST")
            div.row
                div.col.s12.l12.m12
                    h5 Изменение заказа #{order.name}
                    div.row
                        div.col.s12.m6.l6
                            div.row
                                div.input-field.col.s12.m12.l12
                                    i.material-icons.prefix title
                                    input.validate#title(name="name", type="text", value=order.name)
                                    label(for="title") Наименование проекта
                                div.input-field.col.s12.m12.l12
                                    i.material-icons.prefix insert_link
                                    input.validate#linkToTechnicalProject(name="linkToTechnicalProject", type="text", value=order.linkToTechnicalProject)
                                    label(for="linkToTechnicalProject") Ссылка на техническое задание
                        div.col.s12.m6.l6
                            div.row
                                div.col.s12.l12.m12
                                    label(for="dateOfPublication") Дата публикации проекта
                                    input#dateOfPublication(name="dateOfPublication", type="text", class="datepicker", value=order.dates.dateOfPublication.toString('yyyy-MM-dd'))
                                div.input-field.col.s12.m12.l12
                                    i.material-icons.prefix format_list_bulleted
                                    select#state(name="state", value=order.state)
                                        option(value=order.state, selected=true) #{order.state}
                                        option(value="created") Создан
                                        option(value="mark-to-remove") Удалён
                                        option(value="in-progress") В работе
                                        option(value="in-testing") Тестирование
                                        option(value="finished") Завершен
                                        option(value="on-completion") На доработке
                                    label Статус
                    div.row
                        div.input-field.col.s12.l12.m12
                            i.material-icons.prefix subject
                            textarea#description.materialize-textarea(name="description") #{order.description}
                            label(for="description") Описание проекта
                    div.row
                        div.col.s12.m3.l3
                            label(for="dateStartOfWork") Дата начала работ
                            input#dateStartOfWork(name="dateStartOfWork", type="text", class="datepicker", value=order.dates.dateStartOfWork.toString('yyyy-MM-dd'))
                        div.col.s12.m3.l3
                            label(for="dateEndOfWork") Дата окончания работ
                            input#dateEndOfWork(name="dateEndOfWork", type="text", class="datepicker", value=order.dates.dateEndOfWork.toString('yyyy-MM-dd'))
                        div.col.s12.m3.l3
                            label(for="dateOfRepublication") Дата перепубликации
                            input#dateOfRepublication(name="dateOfRepublication", type="text", class="datepicker", value=order.dates.dateOfRepublication.toString('yyyy-MM-dd'))
                        div.col.s12.m3.l3
                            label(for="dateAcceptOfWorks") Дата принятия работ
                            input#dateAcceptOfWorks(name="dateAcceptOfWorks", type="text", class="datepicker", value=order.dates.dateAcceptOfWorks.toString('yyyy-MM-dd'))
                    div.row
                        div.col.s12.m6.l6
                            div.input-field.col.s12.m12.l12
                                i.material-icons.prefix face
                                select#owner(name="owner", value=order.productOwner.username)
                                    option(value=order.productOwner.username, selected=true) #{order.productOwner.username} 
                                    option(value="neuromanticjs") Neuromanticjs
                                label Владелец
                        div.col.s12.m6.l6
                            div.input-field.col.s12.m12.l12
                                i.material-icons.prefix group
                                select#freelancer(name="freelancer")
                                    option(value=order.freelancer.username, selected=true) #{order.freelancer.username}
                                    option(value="neuromanticjs") Neuromanticjs
                                label Исполнитель
                    div.row
                        div.col.s12.m6.l6.left-align
                            button.btn.waves-effect.waves-light(type="submit", name="save") Сохранить
                        div.col.s12.m6.l6.right-align
                            a.btn.waves-effect.waves-light.blue(href="https://www.sdvor.com/auth/register/") Назад
    else
        div.row
            div.col.s12.l12.m12
                div.card.red.darken-1
                    div.card-content.white-text
                        span.card-title Заказ не найден
                        p Извините, но такого заказа не удалось найти